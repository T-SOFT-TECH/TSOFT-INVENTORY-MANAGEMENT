<div class="relative">
  <video id="video" #video
    [class]="'w-full rounded-lg ' + (isScanning ? 'scanning' : '')"
  ></video>

  @if (isScanning) {
    <div class="absolute inset-0 border-2 border-primary-500 animate-pulse rounded-lg"></div>
  }

  <div class="mt-4 flex justify-between">
    <button
      (click)="toggleScanner()"
      class="px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600
                 flex items-center gap-2 transition-colors">
      <span class="material-icons">{{ isScanning ? 'stop' : 'qr_code_scanner' }}</span>
      {{ isScanning ? 'Stop Scanning' : 'Start Scanning' }}
    </button>

    @if (isScanning && deviceCount() > 1) {
      <button
        (click)="switchCamera()"
        class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700
                   text-gray-700 dark:text-gray-300 transition-colors">
        <span class="material-icons">switch_camera</span>
      </button>
    }
  </div>
</div>
